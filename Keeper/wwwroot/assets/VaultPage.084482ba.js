import{_ as x,w as V,q as K,A as i,s as m,P as r,v as _,x as P,K as I,a,b as t,e as C,t as p,f as y,g,d,F as S,r as N,y as A,h as k,o,u as R,p as E,i as j,z as f}from"./index.f30da8c1.js";const B={setup(){const c=R(),n=A();async function h(s){try{await _.getVault(s)}catch(l){r.error(l.message,"[Get Vault]"),n.push({name:"Home"})}}async function e(s){try{await _.getKeepsInVault(s)}catch(l){r.error(l.message,"[Getting Keeps In Vault]")}}return V(()=>{c.params.vaultId&&(h(c.params.vaultId),e(c.params.vaultId))}),K(()=>{i.keeps=[],i.vault=null}),{vault:m(()=>i.vault),account:m(()=>i.account),keeps:m(()=>i.keeps),async deleteVault(s){try{await r.confirm("Are you sure you want to PERMANENTLY delete this vault?")&&(await _.deleteVault(s),r.success("Successfully deleted your vault!"),n.push({name:"Home"}))}catch(l){r.error(l.message,"[Deleting Vault]")}},async changePrivacy(){try{const s=i.vault;s.isPrivate=!s.isPrivate,await _.updateVault(s)}catch(s){r.error(s.message,"[Changing Vault Privacy]")}},async removeKeep(s){try{await r.confirm("Are you sure you want to remove this keep from this vault?")&&await P.removeKeep(s)}catch(l){r.error(l.message,"[Removing Keep]")}}}},components:{KeepCard:I}},v=c=>(E("data-v-2b49ecf6"),c=c(),j(),c),D={key:0,class:"container-fluid pb-5"},M={class:"row"},z={class:"col-10 offset-1 col-md-6 offset-md-3 p-2"},F={class:"vault-title text-shadow fw-bold"},G={class:"text-shadow fs-5"},H={key:0,class:"row"},L={class:"col-8 offset-2 col-md-6 offset-md-3 px-2"},T={class:"w-100 d-flex align-items-center justify-content-between"},Y=v(()=>t("span",null,[f("Make Public "),t("i",{class:"mdi mdi-lock-open"})],-1)),q=[Y],U=v(()=>t("span",null,[f("Make Private "),t("i",{class:"mdi mdi-lock"})],-1)),J=[U],O=v(()=>t("span",null,[f("Delete "),t("i",{class:"mdi mdi-delete"})],-1)),Q=[O],W={class:"row"},X={class:"col-6 offset-3 px-2 mt-1 d-flex justify-content-center align-items-center"},Z={key:0,class:"bg-info px-2 py-1 rounded-pill fs-5"},$={key:1,class:"bg-info px-2 py-1 rounded-pill fs-5"},ee={key:2,class:"bg-info px-2 py-1 rounded-pill fs-5"},te={class:"row mt-3 mb-5"},se={class:"col-12 col-md-8 offset-md-2"},ae={class:"bricks"},oe={class:"rounded hover-card"},ne=["onClick"],ce=v(()=>t("span",null,[t("i",{class:"mdi mdi-delete"})],-1)),le=[ce];function re(c,n,h,e,s,l){const b=k("router-link"),w=k("KeepCard");return e.vault?(o(),a("div",D,[t("div",M,[t("div",z,[t("div",{class:"rounded vault-bg d-flex align-items-center justify-content-end flex-column pb-2 text-light",style:C({backgroundImage:`url(${e.vault.img})`})},[t("span",F,p(e.vault.name),1),y(b,{to:{name:"Profile",params:{profileId:e.vault.creator.id}}},{default:g(()=>[t("span",G,"by "+p(e.vault.creator.name),1)]),_:1},8,["to"])],4)])]),e.account.id==e.vault.creator.id?(o(),a("div",H,[t("div",L,[t("div",T,[e.vault.isPrivate?(o(),a("button",{key:0,class:"btn btn-dark",onClick:n[0]||(n[0]=u=>e.changePrivacy())},q)):(o(),a("button",{key:1,class:"btn btn-dark",onClick:n[1]||(n[1]=u=>e.changePrivacy())},J)),t("button",{class:"btn btn-danger",onClick:n[2]||(n[2]=u=>e.deleteVault(e.vault.id))},Q)])])])):d("",!0),t("div",W,[t("div",X,[e.keeps.length>1?(o(),a("span",Z,p(e.keeps.length)+" Keeps",1)):d("",!0),e.keeps.length==1?(o(),a("span",$,p(e.keeps.length)+" Keep",1)):d("",!0),e.keeps.length<1?(o(),a("span",ee,"No Keeps Yet!")):d("",!0)])]),t("div",te,[t("div",se,[t("div",ae,[(o(!0),a(S,null,N(e.keeps,u=>(o(),a("div",oe,[y(w,{keep:u},{default:g(()=>[e.vault.creator.id==e.account.id?(o(),a("button",{key:0,class:"btn btn-danger move-over py-1 px-1",title:"Remove this keep from this vault.",onClick:ie=>e.removeKeep(u.vaultKeepId)},le,8,ne)):d("",!0)]),_:2},1032,["keep"])]))),256))])])])])):d("",!0)}const ue=x(B,[["render",re],["__scopeId","data-v-2b49ecf6"]]);export{ue as default};
